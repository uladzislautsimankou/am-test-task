## 1. –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ –±–∞–∑–µ Quartz.NET –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–¥–∞—á.
*  –ó–∞–ø—É—Å–∫ –ø–æ Cron-–≤—ã—Ä–∞–∂–µ–Ω–∏—é. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ `Retry Policy` (5 –ø–æ–ø—ã—Ç–æ–∫ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–±–æ–µ–≤.
*  –î–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –ø–æ—Ç–æ–∫–æ–≤–æ (`IAsyncEnumerable`) –Ω–∞–ø—Ä—è–º—É—é –∏–∑ HTTP-–æ—Ç–≤–µ—Ç–∞, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏.
*  **Bulk Merge:**
   *  –î–∞–Ω–Ω—ã–µ –ø–∞—á–∫–∞–º–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É (Staging Table).
   *  C–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–ª–∞—Å—Å–æ–≤ (RecClass) –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
   *  –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω—ã–π SQL MERGE:
      *  *Matched:* –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π.
      *  *Not Matched:* –≤—Å—Ç–∞–≤–∫–∞ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π.
      *  *Not Matched by Source:* —É–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö (Hard Delete).
*  –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞.

## 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (PostgreSQL)
–°—Ö–µ–º–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å —É—á–µ—Ç–æ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —á–∞—Å—Ç—ã—Ö –≤—ã–±–æ—Ä–æ–∫ –∏ –ø–æ–∏—Å–∫–∞.

*  –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á (`Id`) –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –±–∞–∑–æ–π (`ValueGeneratedNever`), –∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Id –∏—Å—Ç–æ—á–Ω–∏–∫–∞.
*  –î–ª—è —á–∏—Å—Ç–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø–æ (`Year, RecClassId`) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å `(Year, RecClassId) INCLUDE (Mass)`, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≤—ã–ø–æ–ª–Ω—è—Ç—å Index Only Scan.
*  –î–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∏–º–µ–Ω–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è GIN‚Äë–∏–Ω–¥–µ–∫—Å —Å `pg_trgm`.

## 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ 
*  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å –≤–µ—Ä—Å–∏–∏ –¥–ª—è –∫–ª—é—á–µ–π. –ü–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤–µ—Ä—Å–∏—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è (`v1` -> `v2`), –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç —á–∏—Ç–∞—Ç—å –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ. –°—Ç–∞—Ä—ã–π –∫—ç—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ "–æ—Ç–º–∏—Ä–∞–µ—Ç" –ø–æ TTL.
*  –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
   *  –ö–ª—é—á –∫—ç—à–∞ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å—Ç—Ä–æ–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏.
   *  *Cache Miss:* –ó–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –≤ –ë–î (—Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π), —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫—ç—à.
   *  *Cache Hit:* –î–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫—ç—à–∞, –∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (In-Memory). 
*  –ö–ª–∞—Å—Å—ã –º–µ—Ç–µ–æ—Ä–∏—Ç–æ–≤ –∫—ç—à–∏—Ä—É—é—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

## 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è
–ü—Ä–æ–µ–∫—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø–æ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **Clean Architecture**, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å–ª–∞–±—É—é —Å–≤—è–∑–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –ª–µ–≥–∫—É—é –∑–∞–º–µ–Ω—è–µ–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

*   **Business Layer (Core + Application)**
    * –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –æ–¥–∏–Ω —Å–ª–æ–π, —á—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–ª–∞–±—É—é —Å–≤—è–∑–Ω–æ—Å—Ç—å –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω—ã –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã   
    *   `AM.TestTask.Business`: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–ª–æ–π, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —á–∏—Å—Ç—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.
    *   –í–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è: Entities, DTOs, –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã (FluentValidation), –¥–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∏ **–∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏** (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã) –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏ –∫—ç—à–∞. –≠—Ç–æ—Ç —Å–ª–æ–π –Ω–µ –∑–Ω–∞–µ—Ç –æ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Å–ø–æ—Å–æ–±–µ –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö.
*   **Infrastructure Layer**
    *   `Data.Relational.*` / `Data.Cache`: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –±–∏–∑–Ω–µ—Å-—Å–ª–æ—è. –ó–¥–µ—Å—å –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è EF Core, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PostgreSQL –∏ –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å Redis.
    *   `Infrastructure`: –°–æ–¥–µ—Ä–∂–∏—Ç —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (Quartz Jobs), —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é HTTP-–∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
*   **Common**
    *   –ù–∞–±–æ—Ä –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫, –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–≤—è–∑–∞–Ω–Ω—ã—Ö –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞.
    *   –í–∫–ª—é—á–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, `UnitOfWork` –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü (`Generic Table Synchronizer`), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

## üöÄ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **PostgreSQL**.

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
–£–∫–∞–∂–∏—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–∞—à–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î `ApplicationDatabaseConnection`.

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`appsettings.json`):
```json
"ConnectionStrings": {
  "ApplicationDatabaseConnection": "Host=localhost;Port=5432;Database=am_test_task_db;Username=postgres;Password=–í–ê–®_–ü–ê–†–û–õ–¨"
}
```

### 2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (Visual Studio)
–ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î.
–û—Ç–∫—Ä–æ–π—Ç–µ Package Manager Console –≤ Visual Studio:

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **Startup Project** –≤ Solution Explorer —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ `AM.TestTask.Api`.
2. –í —Å–∞–º–æ–π –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ **Default Project**: `AM.TestTask.Data.Relational.AppDatabase.PostgreSql`.
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```power-shell
Update-Database
```
‚úÖ –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É.
